package org.campagnelab.bdval.behavior;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import org.apache.commons.lang.WordUtils;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import java.io.Writer;
import java.io.BufferedWriter;
import java.io.FileWriter;

public class Information_Behavior {
  public static void init(SNode thisNode) {
  }

  public static void call_writeExecutableAndRun_6543595179959505582(SNode thisNode) {
    String projectName = WordUtils.capitalize(SPropertyOperations.getString(thisNode, "name").replaceAll("\\s", ""));
    try {
      String script = "cd " + SPropertyOperations.getString(thisNode, "bdvalLocation") + "data \n export ANT_HOME=" + SPropertyOperations.getString(thisNode, "antLocation") + "\n export PATH=${PATH}:${ANT_HOME}/bin \n ant -f" + SPropertyOperations.getString(thisNode, "outputLocation") + "/" + projectName + "/" + projectName + ".xml";
      Writer output = new BufferedWriter(new FileWriter(SPropertyOperations.getString(thisNode, "outputLocation") + "/" + projectName + "/run.command"));
      output.write(script);
      output.close();
    } catch (Exception e) {
      throw new Error("Error creating executable file");
    }
    try {
      Runtime.getRuntime().exec("open " + SPropertyOperations.getString(thisNode, "outputLocation") + "/" + projectName + "/run.command");
    } catch (Exception e) {
      throw new Error("Error running project");
    }
  }
}
